syntax = "proto3";

package librarian;

option go_package = "recon_com.lib.v1;lib";

service Librarian {
  // Отправка файла в ответ на запрос
  rpc SendFile(SendFileRequest) returns (SendFileResponse);

  // Получить список регионов
  rpc GetAllRegions(GetAllRegionsRequest) returns (GetAllRegionsResponse);

  // Получить ссылку для скачивания файла
  rpc GetInfoForDownload(GetInfoForDownloadRequest) returns (GetInfoForDownloadResponse);
}

/////////////////////////////////////////////////////////////////

// Получить ссылку для скачивания файла
message GetInfoForDownloadRequest{
  int32 source_id = 1;
}

message GetInfoForDownloadResponse{
  string downloadURL = 1;
  FileInfo file_info = 2;
}

message FileInfo{
  int64 size = 1;
  string mime_type = 2;
}

// Получить список регионов
message GetAllRegionsRequest{}

message GetAllRegionsResponse{
  repeated Region region = 1;
}

message Region {
  int32 id = 1;
  string name_ru = 2;
  string description = 3;
}

// Отправка файла в ответ на запрос
message SendFileRequest {
  // Текст сообщения
  string text = 1;
}

message SendFileResponse {
  //файл
  bytes file = 1;
}